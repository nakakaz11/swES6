{"version":3,"sources":["weight.js"],"names":[],"mappings":"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","file":"weight-compiled.js","sourcesContent":["/* sw ES6 151203 */\n\"use strict\";\n(()=> {\n\n  let brushed = ()=> {\n    x.domain((brush.empty() ? x2.domain() : brush.extent()));\n    focus.select(\"path\").attr(\"d\", area);\n    focus.select(\".x.axis\").call(xAxis);\n  };\n  let margin = {\n    top   : 10,\n    right : 10,\n    bottom: 100,\n    left  : 40\n  };\n  let margin2 = {\n    top   : 430,\n    right : 10,\n    bottom: 20,\n    left  : 40\n  };\n  let width = 960 - margin.left - margin.right;\n  let height = 500 - margin.top - margin.bottom;\n  let height2 = 500 - margin2.top - margin2.bottom;\n  let parseDate = d3.time.format(\"%Y-%m-%d\").parse;\n  let x = d3.time.scale().range([0, width]);\n  let x2 = d3.time.scale().range([0, width]);\n  let y = d3.scale.linear().range([height, 0]);\n  let y2 = d3.scale.linear().range([height2, 0]);\n  let xAxis = d3.svg.axis().scale(x).orient(\"bottom\");\n  let xAxis2 = d3.svg.axis().scale(x2).orient(\"bottom\");\n  let yAxis = d3.svg.axis().scale(y).tickSize(width).orient(\"right\");\n  let brush = d3.svg.brush().x(x2).on(\"brush\", brushed);\n\n  let area = d3.svg.area().interpolate(\"step-after\")\n    .x((d)=> { return x(d.date); }).y0(height).y1((d)=> { return y(d.price); });\n  let area2 = d3.svg.area().interpolate(\"monotone\")\n    .x((d)=> { return x2(d.date); }).y0(height2).y1((d)=> { return y2(d.price); });\n\n  let svg = d3.select(\"#svg3\").append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom);\n\n  svg.append(\"defs\").append(\"clipPath\").attr(\"id\", \"clipVia\").append(\"rect\").attr(\"width\", width).attr(\"height\", height);\n  let focus = svg.append(\"g\").attr(\"transform\", `translate(${margin.left},${margin.top})`);\n  let context = svg.append(\"g\").attr(\"class\", \"swCont\").attr(\"transform\", `translate(${margin2.left},${margin2.top})`);\n\n  d3.csv(\"/_jsFiddle_/swES6/json/weight.csv\", (error, data)=> {\n    let bisectDate, formatCurrency, formatValue, mousemove, tip;\n\n    data.forEach((d) =>{\n      d.date = parseDate(d.date);\n      return d.price = +d.price;\n    });\n    x.domain(d3.extent(data.map((d) =>{\n      return d.date;\n    })));\n    y.domain([\n      d3.min(data.map((d) =>{\n        return d.price;\n      })) - 5\n      , d3.max(data.map((d) =>{\n        return d.price;\n      })) + 5\n    ]);\n    x2.domain(x.domain());\n    y2.domain(y.domain());\n\n    focus.append(\"path\").datum(data).attr(\"clipVia-path\", \"url(#clipVia)\").attr(\"d\", area);\n    focus.append(\"g\").attr(\"class\", \"x axis\").attr(\"transform\", `translate(0, ${height})`).call(xAxis);\n    focus.append(\"g\").attr(\"class\", \"y axis\").call(yAxis);\n    focus.selectAll(\"g\").filter((d) =>{ return d; }).classed(\"minor\", true);\n    focus.selectAll(\"text\").attr(\"x\", 4).attr(\"dy\", 4);\n\n    tip = svg.append(\"g\").attr(\"class\", \"tip\").style(\"display\", \"none\");\n    tip.append(\"circle\").attr(\"r\", 4.5);\n    tip.append(\"text\").attr(\"x\", -10 - margin.left).attr(\"dy\", \".35em\");\n    bisectDate = d3.bisector((d) =>{\n      return d.date;\n    }).left;\n\n    //formatValue = d3.format(\",.2f\");\n    //formatCurrency = (d) =>{ return \"cal.\" + formatValue(d); };\n    \n    mousemove = function () {\n      var d, d0, d1, i, x0;\n      x0 = x.invert(d3.mouse(this)[0]);\n      i = bisectDate(data, x0, 1);\n      d0 = data[i - 1];\n      d1 = (data[i]) ? data[i] : 0;\n      d = (x0 - d0.date > d1.date - x0) ? d1 : d0;\n      tip.attr(\"transform\", `translate(${x(d.date) + margin.left}, ${y(d.price) + margin.top})`);\n      tip.select(\"text\").text(d.price);\n    };\n\n\n    svg.append(\"rect\").attr(\"class\", \"overlay\")\n      .attr(\"width\", width).attr(\"height\", height)\n      .attr(\"transform\", `translate(${margin.left},${margin.top})`)\n      .on(\"mouseover\", function () {\n        tip.style(\"display\", null);\n      }).on(\"mouseout\", function () {\n        tip.style(\"display\", \"none\");\n      }).on(\"mousemove\", mousemove);\n\n    context.append(\"path\").datum(data).attr(\"d\", area2);\n    context.append(\"g\").attr(\"class\", \"x axis\").attr(\"transform\", `translate(0,${height2 })`)\n      .call(xAxis2);\n    context.append(\"g\").attr(\"class\", \"x brush\")\n      .call(brush).selectAll(\"rect\").attr(\"y\", -6).attr(\"height\", height2 + 7);\n  });\n\n\n})();\n"]}